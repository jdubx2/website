<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Jesse Weiss</title>

    <!-- Bootstrap core CSS -->
    <!-- <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"> -->
    <link href="vendor/bootstrap/css/bootstrap.css" rel="stylesheet">

    <link href="css/3-col-portfolio.css" rel="stylesheet">

    <link href='css/mdb.css' rel='stylesheet'>
    <link href='css/os.css' rel='stylesheet'>

    <link rel="shortcut icon" type="image/png" href="img/favicon.png"/>

  </head>

  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container"> <img class ='navlogo' src ='img/logo.png' alt="", height = '55', width = '55'>
        <a class="navbar-brand" href="index.html"><b>jesseweiss.me</b></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <!-- <li class="nav-item active">
              <a class="nav-link" href="#">Home
                <span class="sr-only">(current)</span>
              </a>
            </li> -->
            <li class="nav-item">
              <a href='index.html'><div class = 'nav-icon'><svg class = 'nav-icon-svg' xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path stroke='none' fill='#f5f5f5' d="M12 9.185l7 6.514v6.301h-14v-6.301l7-6.514zm0-2.732l-9 8.375v9.172h18v-9.172l-9-8.375zm2 14.547h-4v-6h4v6zm10-8.852l-1.361 1.465-10.639-9.883-10.639 9.868-1.361-1.465 12-11.133 12 11.148z"/></svg>
              </div></a>
            </li>
            <li class="nav-item">
              <a href='resume.html'><div class = 'nav-icon'><svg class = 'nav-icon-svg' xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path stroke="none" fill="#f5f5f5" d="M4 22v-20h16v11.543c0 4.107-6 2.457-6 2.457s1.518 6-2.638 6h-7.362zm18-7.614v-14.386h-20v24h10.189c3.163 0 9.811-7.223 9.811-9.614zm-5-1.386h-8v-1h8v1zm0-4h-8v1h8v-1zm0-3h-8v1h8v-1zm-9 0h-1v1h1v-1zm0 3h-1v1h1v-1zm0 3h-1v1h1v-1z"/></svg>
              </div></a>
            </li>
            <!-- <li class="nav-item">
              <a class="nav-link" href="#">Resume</a>
            </li> -->
            <!-- <li class="nav-item">
              <a class="nav-link" href="#">Services</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Contact</a>
            </li> -->
            <li class="nav-item">
              <a href='https://www.linkedin.com/in/jesse-w-weiss/' target="_blank"><div class = 'nav-icon'><svg class = 'nav-icon-svg-li' xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path stroke="none" fill="#f5f5f5" d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
              </div></a>
            </li>
            <li class="nav-item">
              <a href='https://github.com/jdubx2' target="_blank"><div class = 'nav-icon'><svg class = 'nav-icon-svg-gh' xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path stroke="none" fill="#f5f5f5" d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
              </div></a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Content -->
    <div class='lax'>
    <div class="container">
      <!-- Page Heading -->
      <div class = 'banner-space'></div>
        <div class = 'text-input-box'>
          <h1 class='article_h1'><b>Strava Exploration</b>
            <a style = 'float:right;' href='https://github.com/jdubx2/website/tree/master/strava' target="_blank"><div class = 'nav-icon'><svg class = 'nav-icon-svg-gh' xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path stroke="none" fill="black" d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
            </div></a>
          <br /><span class = 'sub_span'>Analysis of my Running and Biking Data</span></h1>
          <div class='customHr'>a</div>
          <h2><b>Preface</b></h2>
          <p>Strava is a fitness tracking application that I use to track runs, bike rides, and the occasional hike.
            The app allows users to download their activity history in bulk as GPX, a GPS enabled data format built ontop of XML.
            I've been using the app for almost five years so there should be plenty of my personal data to explore!</p>
          <p>In this project, I do some analysis and make some maps? TBD...</p>
          <h2><b>GPX Parsing</b></h2>
          <p>Python has a great library for parsing GPX files named <a target = '_blank' href = 'https://github.com/tkrajina/gpxpy'>gpxpy</a>. Using this library along with pandas,
            I combined my collection of ride files (208 in total) into a tidy dataframe for further analysis.</p>
        </div>
        <div class = 'code-chunk'>
<pre style="background:#211e1e;color:#f8f8f8"><span style="color:#e28964">import</span> os
<span style="color:#e28964">import</span> pandas <span style="color:#e28964">as</span> pd
<span style="color:#e28964">import</span> gpxpy

<span style="color:#aeaeae;font-style:italic">#Function to parse individual GPX files</span>
<span style="color:#99cf50">def</span> <span style="color:#89bdff">parseGPX</span>(<span style="color:#3e87e3">file</span>):
    pointlist <span style="color:#e28964">=</span> []
    <span style="color:#e28964">with</span> <span style="color:#9b859d">open</span>(<span style="color:#9b859d">file</span>, <span style="color:#65b042">'r'</span>) <span style="color:#e28964">as</span> gpxfile:
        <span style="color:#e28964">if</span> <span style="color:#65b042">"Run"</span> <span style="color:#e28964">in</span> <span style="color:#9b859d">file</span>:
            activity <span style="color:#e28964">=</span> <span style="color:#65b042">"Run"</span>
        <span style="color:#e28964">elif</span> <span style="color:#65b042">"Ride"</span> <span style="color:#e28964">in</span> <span style="color:#9b859d">file</span>:
            activity <span style="color:#e28964">=</span> <span style="color:#65b042">"Ride"</span>
        <span style="color:#e28964">elif</span> <span style="color:#65b042">"Hike"</span> <span style="color:#e28964">in</span> <span style="color:#9b859d">file</span>:
            activity <span style="color:#e28964">=</span> <span style="color:#65b042">"Hike"</span>
        <span style="color:#e28964">else</span>:
            activity <span style="color:#e28964">=</span> <span style="color:#65b042">"NA"</span>
        gpx <span style="color:#e28964">=</span> gpxpy.parse(gpxfile)
        <span style="color:#e28964">for</span> track <span style="color:#e28964">in</span> gpx.tracks:
            <span style="color:#e28964">for</span> segment <span style="color:#e28964">in</span> track.segments:
                <span style="color:#e28964">for</span> point <span style="color:#e28964">in</span> segment.points:
                    <span style="color:#9b859d">dict</span> <span style="color:#e28964">=</span> {<span style="color:#65b042">'Timestamp'</span> : point.time,
                            <span style="color:#65b042">'Latitude'</span> : point.latitude,
                            <span style="color:#65b042">'Longitude'</span> : point.longitude,
                            <span style="color:#65b042">'Elevation'</span> : point.elevation,
                            <span style="color:#65b042">'Activity'</span> : activity
                            }
                    pointlist.append(<span style="color:#9b859d">dict</span>)
    <span style="color:#e28964">return</span> pointlist

<span style="color:#aeaeae;font-style:italic">#Create file names variable</span>
gpx_dir <span style="color:#e28964">=</span> <span style="color:#65b042"><span style="color:#99cf50">r</span>'D:/strava/strava_rides'</span>
files <span style="color:#e28964">=</span> os.listdir(gpx_dir)

<span style="color:#aeaeae;font-style:italic">#Call parseGPX on each file and append to dataframe</span>
df <span style="color:#e28964">=</span> pd.concat([pd.DataFrame(parseGPX(<span style="color:#9b859d">file</span>)) <span style="color:#e28964">for</span> <span style="color:#9b859d">file</span> <span style="color:#e28964">in</span> files], <span style="color:#3e87e3">keys</span><span style="color:#e28964">=</span>files)
df.reset_index(<span style="color:#3e87e3">level</span><span style="color:#e28964">=</span><span style="color:#3387cc">0</span>, <span style="color:#3e87e3">inplace</span><span style="color:#e28964">=</span><span style="color:#3387cc">True</span>)
df.rename(<span style="color:#3e87e3">columns</span><span style="color:#e28964">=</span>{<span style="color:#65b042">'level_0'</span>:<span style="color:#65b042">'File'</span>}, <span style="color:#3e87e3">inplace</span><span style="color:#e28964">=</span><span style="color:#3387cc">True</span>)
df.head()
</pre>
        </div>
        <div class = 'img_box'>
          <table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
          <thead>
          <tr>
          <th style="border-bottom: 1px solid grey; border-top: 2px solid grey;"> </th>
          <th style="border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">File</th>
          <th style="border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">Activity</th>
          <th style="border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">Elevation</th>
          <th style="border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">Latitude</th>
          <th style="border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">Longitude</th>
          <th style="border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">Timestamp</th>
          </tr>
          </thead>
          <tbody>
          <tr>
          <td style="text-align: left;">1</td>
          <td style="text-align: center;">20130209-203200-Ride.gpx</td>
          <td style="text-align: center;">Ride</td>
          <td style="text-align: center;">170.4</td>
          <td style="text-align: center;">34.123601</td>
          <td style="text-align: center;">-118.233569</td>
          <td style="text-align: center;">2013-02-09 20:32:00</td>
          </tr>
          <tr>
          <td style="text-align: left;">2</td>
          <td style="text-align: center;">20130209-203200-Ride.gpx</td>
          <td style="text-align: center;">Ride</td>
          <td style="text-align: center;">169.6</td>
          <td style="text-align: center;">34.123588</td>
          <td style="text-align: center;">-118.233539</td>
          <td style="text-align: center;">2013-02-09 20:33:13</td>
          </tr>
          <tr>
          <td style="text-align: left;">3</td>
          <td style="text-align: center;">20130209-203200-Ride.gpx</td>
          <td style="text-align: center;">Ride</td>
          <td style="text-align: center;">169.1</td>
          <td style="text-align: center;">34.123561</td>
          <td style="text-align: center;">-118.23352</td>
          <td style="text-align: center;">2013-02-09 20:33:18</td>
          </tr>
          <tr>
          <td style="text-align: left;">4</td>
          <td style="text-align: center;">20130209-203200-Ride.gpx</td>
          <td style="text-align: center;">Ride</td>
          <td style="text-align: center;">169.1</td>
          <td style="text-align: center;">34.12351</td>
          <td style="text-align: center;">-118.233521</td>
          <td style="text-align: center;">2013-02-09 20:33:21</td>
          </tr>
          <tr>
          <td style="text-align: left;">5</td>
          <td style="text-align: center;">20130209-203200-Ride.gpx</td>
          <td style="text-align: center;">Ride</td>
          <td style="text-align: center;">169.6</td>
          <td style="text-align: center;">34.123442</td>
          <td style="text-align: center;">-118.233532</td>
          <td style="text-align: center;">2013-02-09 20:33:24</td>
          </tr>
          <tr>
          <td style="border-bottom: 2px solid grey; text-align: left;">6</td>
          <td style="border-bottom: 2px solid grey; text-align: center;">20130209-203200-Ride.gpx</td>
          <td style="border-bottom: 2px solid grey; text-align: center;">Ride</td>
          <td style="border-bottom: 2px solid grey; text-align: center;">170.4</td>
          <td style="border-bottom: 2px solid grey; text-align: center;">34.123368</td>
          <td style="border-bottom: 2px solid grey; text-align: center;">-118.233528</td>
          <td style="border-bottom: 2px solid grey; text-align: center;">2013-02-09 20:33:27</td>
          </tr>
          </tbody>
          </table>
        </div>
        <div class = 'img_box'>
          <img style = 'width : 100%' src = 'img/strava_scat.svg'>
        </div>
        <div class = 'img_box'>
          <img class = 'img_box_img2' src = 'img/strava_violin.svg'>
          <img class = 'img_box_img2' src = 'img/strava_lines.svg'>
        </div>

    </div>
    </div>
    <!-- /.container -->

    <!-- Footer -->
    <footer class="py-5 bg-dark">
      <div class="container">
        <p class="m-0 text-center text-white">&copy; 2018 jesseweiss.me</p>
      </div>
      <!-- /.container -->
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/bootstrap/js/parallax.min.js"></script>
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script src="vendor/bootstrap/js/newjs.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>

  </body>

</html>
