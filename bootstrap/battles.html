<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Jesse Weiss</title>

    <!-- Bootstrap core CSS -->
    <!-- <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"> -->
    <link href="vendor/bootstrap/css/bootstrap.css" rel="stylesheet">

    <link href="css/3-col-portfolio.css" rel="stylesheet">

    <link href='css/mdb.css' rel='stylesheet'>
    <link href='css/os.css' rel='stylesheet'>

    <link rel="shortcut icon" type="image/png" href="img/favicon.png"/>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-92041039-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-92041039-1');
    </script>

  </head>

  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container"> <img class ='navlogo' src ='img/logo.png' alt="", height = '55', width = '55'>
        <a class="navbar-brand" href="index.html">jesseweiss.me</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <!-- <li class="nav-item active">
              <a class="nav-link" href="#">Home
                <span class="sr-only">(current)</span>
              </a>
            </li> -->
            <li class="nav-item">
              <a href='index.html'><div class = 'nav-icon'><svg class = 'nav-icon-svg' xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path stroke='none' fill='#f5f5f5' d="M12 9.185l7 6.514v6.301h-14v-6.301l7-6.514zm0-2.732l-9 8.375v9.172h18v-9.172l-9-8.375zm2 14.547h-4v-6h4v6zm10-8.852l-1.361 1.465-10.639-9.883-10.639 9.868-1.361-1.465 12-11.133 12 11.148z"/></svg>
              </div></a>
            </li>
            <li class="nav-item">
              <a href='resume.html'><div class = 'nav-icon'><svg class = 'nav-icon-svg' xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path stroke="none" fill="#f5f5f5" d="M4 22v-20h16v11.543c0 4.107-6 2.457-6 2.457s1.518 6-2.638 6h-7.362zm18-7.614v-14.386h-20v24h10.189c3.163 0 9.811-7.223 9.811-9.614zm-5-1.386h-8v-1h8v1zm0-4h-8v1h8v-1zm0-3h-8v1h8v-1zm-9 0h-1v1h1v-1zm0 3h-1v1h1v-1zm0 3h-1v1h1v-1z"/></svg>
              </div></a>
            </li>
            <li class="nav-item">
              <a href='https://www.linkedin.com/in/jesse-w-weiss/' target="_blank"><div class = 'nav-icon'><svg class = 'nav-icon-svg-li' xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path stroke="none" fill="#f5f5f5" d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
              </div></a>
            </li>
            <li class="nav-item">
              <a href='https://github.com/jdubx2' target="_blank"><div class = 'nav-icon'><svg class = 'nav-icon-svg-gh' xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path stroke="none" fill="#f5f5f5" d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
              </div></a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Content -->
    <div class='lax'>
    <div class="container">
      <!-- Page Heading -->
      <div class = 'banner-space'></div>
        <div class = 'text-input-box'>
          <h1 class='article_h1'><b>DataViz Battles - 2018</b>
            <a style = 'float:right;' href='https://github.com/jdubx2/battles' target="_blank"><div class = 'nav-icon'><svg class = 'nav-icon-svg-gh' xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path stroke="none" fill="black" d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
            </div></a>
          <br /><span class = 'sub_span'>Data visualizations created for monthly competitions on r/dataisbeautiful</span></h1>
          <div class='customHr'>a</div>
          <h2><b>Preface</b></h2>
          <p>Each month in 2018, the moderators of r/dataisbeautiful will provide a dataset for the community to visualize. It is entirely
          up to contestants how to represent the data and one winner is chosen at the end of each month. I've decided that this friendly competition
          is a great opportunity to learn new things about data visualization and my goal will be to learn about and incorporate at least one new technique each month.</p>
          <h2><b>January</b></h2>
          <p>January's competiton was visualizing the growth rate of multiple algae specied under various light and temperature conditions. More specifically, the dataset contained
          18 species of algae, 4 temperatures, and 2 lighting conditions. Growth rates were then supplied for each permutation of these variables. After some initial exploration of the dataset
          I decided that it would be interesting to highlight which species favored high lighting conditions over low lighting conditions and vice versa. To achieve this, I decided to build line plots for
          each algae species, highlighting the growth variance between lighting types with the tested temperature spectrum along the x axis. As an added challenge, I wanted to find a way to highlight the area
          between the lines to emphasize the growth preferences of each species. In order to achieve this with ggplot I did the following:
          <ol>
            <li>Calculated the slope and intercept of each line segment</li>
            <li>Used the above to find all relevant intersection points (when one line crosses under another)</li>
            <li>Created two dataframes (one for each ribbon color) with ribbon coordinates</li>
            <li>Added ribbons to the plot via respective datafames</li>
          </ol>
          The code excerpt below shows how this was implemented in R and the full script for the visualization can be viewed on <a href = 'https://github.com/jdubx2/battles/blob/master/jan/algae.r' target='_blank'>github</a>.
          </p>
        </div>
        <div class='code-chunk'>
  <pre style="background:#211e1e;color:#dadada"><span style="color:#c1c144">df3</span> <span style="color:#47b8d6">&lt;-</span> <span style="color:#c1c144">df3</span> %<span style="color:#47b8d6">></span>%
  group_by(<span style="color:#c1c144">Species</span>) %<span style="color:#47b8d6">></span>%
  mutate(<span style="color:#c1c144">diff25</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">l2500</span> <span style="color:#47b8d6">-</span> lag(<span style="color:#c1c144">l2500</span>),
         <span style="color:#c1c144">diff50</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">l5000</span> <span style="color:#47b8d6">-</span> lag(<span style="color:#c1c144">l5000</span>),
         <span style="color:#c1c144">diffTemp</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">Temp</span> <span style="color:#47b8d6">-</span> lag(<span style="color:#c1c144">Temp</span>),
         <span style="color:#c1c144">slope25</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">diff25</span><span style="color:#47b8d6">/</span><span style="color:#c1c144">diffTemp</span>,
         <span style="color:#c1c144">slope50</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">diff50</span><span style="color:#47b8d6">/</span><span style="color:#c1c144">diffTemp</span>,
         <span style="color:#c1c144">intcpt25</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">l2500</span> <span style="color:#47b8d6">-</span> <span style="color:#c1c144">slope25</span> <span style="color:#47b8d6">*</span> <span style="color:#c1c144">Temp</span>,
         <span style="color:#c1c144">intcpt50</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">l5000</span> <span style="color:#47b8d6">-</span> <span style="color:#c1c144">slope50</span> <span style="color:#47b8d6">*</span> <span style="color:#c1c144">Temp</span>,
         <span style="color:#c1c144">x2</span> <span style="color:#47b8d6">=</span> (<span style="color:#c1c144">intcpt25</span> <span style="color:#47b8d6">-</span> <span style="color:#c1c144">intcpt50</span>)<span style="color:#47b8d6">/</span>(<span style="color:#c1c144">slope50</span> <span style="color:#47b8d6">-</span> <span style="color:#c1c144">slope25</span>),
         <span style="color:#c1c144">y3</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">slope25</span> <span style="color:#47b8d6">*</span> <span style="color:#c1c144">x2</span> <span style="color:#47b8d6">+</span> <span style="color:#c1c144">intcpt25</span>,
         <span style="color:#c1c144">x2</span> <span style="color:#47b8d6">=</span> ifelse(<span style="color:#c1c144">x2</span> <span style="color:#47b8d6">></span> <span style="color:#c1c144">Temp</span> <span style="color:#47b8d6">|</span> <span style="color:#c1c144">x2</span> <span style="color:#47b8d6">&lt;</span> lag(<span style="color:#c1c144">Temp</span>), <span style="color:#de8e30;font-weight:700">NA</span>, <span style="color:#c1c144">x2</span>),
         <span style="color:#c1c144">y3</span> <span style="color:#47b8d6">=</span> ifelse(<span style="color:#c1c144">x2</span> <span style="color:#47b8d6">></span> <span style="color:#c1c144">Temp</span> <span style="color:#47b8d6">|</span> <span style="color:#c1c144">x2</span> <span style="color:#47b8d6">&lt;</span> lag(<span style="color:#c1c144">Temp</span>), <span style="color:#de8e30;font-weight:700">NA</span>, <span style="color:#c1c144">y3</span>),
         <span style="color:#c1c144">y4</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">y3</span>,
         <span style="color:#c1c144">seg_type</span> <span style="color:#47b8d6">=</span> ifelse(<span style="color:#c1c144">l2500</span> <span style="color:#47b8d6">></span> <span style="color:#c1c144">l5000</span>, <span style="color:#ad9361">'low'</span>,<span style="color:#ad9361">'high'</span>))

<span style="color:#c1c144">break_points</span> <span style="color:#47b8d6">&lt;-</span> <span style="color:#c1c144">df3</span> %<span style="color:#47b8d6">></span>% filter(<span style="color:#47b8d6">!</span>(is.na(<span style="color:#c1c144">x2</span>))) %<span style="color:#47b8d6">></span>%
  select(<span style="color:#c1c144">Species</span>, <span style="color:#c1c144">x</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">x2</span>, <span style="color:#c1c144">ymin</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">y3</span>, <span style="color:#c1c144">ymax</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">y4</span>)

<span style="color:#c1c144">high_ribbon</span> <span style="color:#47b8d6">&lt;-</span> <span style="color:#c1c144">df3</span> %<span style="color:#47b8d6">></span>% filter(<span style="color:#c1c144">seg_type</span> <span style="color:#47b8d6">=</span><span style="color:#47b8d6">=</span> <span style="color:#ad9361">'high'</span>) %<span style="color:#47b8d6">></span>%
  select(<span style="color:#c1c144">Species</span>, <span style="color:#c1c144">x</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">Temp</span>, <span style="color:#c1c144">ymin</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">l2500</span>, <span style="color:#c1c144">ymax</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">l5000</span>)

<span style="color:#c1c144">high_ribbon</span> <span style="color:#47b8d6">&lt;-</span> bind_rows(<span style="color:#c1c144">high_ribbon</span>,<span style="color:#c1c144">break_points</span>)

<span style="color:#c1c144">low_ribbon</span> <span style="color:#47b8d6">&lt;-</span> <span style="color:#c1c144">df3</span> %<span style="color:#47b8d6">></span>% filter(<span style="color:#c1c144">seg_type</span> <span style="color:#47b8d6">=</span><span style="color:#47b8d6">=</span> <span style="color:#ad9361">'low'</span>) %<span style="color:#47b8d6">></span>%
  select(<span style="color:#c1c144">Species</span>, <span style="color:#c1c144">x</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">Temp</span>, <span style="color:#c1c144">ymin</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">l5000</span>, <span style="color:#c1c144">ymax</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">l2500</span>)

<span style="color:#c1c144">low_ribbon</span> <span style="color:#47b8d6">&lt;-</span> bind_rows(<span style="color:#c1c144">low_ribbon</span>,<span style="color:#c1c144">break_points</span>)


<span style="color:#c1c144">plot</span> <span style="color:#47b8d6">&lt;-</span> <span style="color:#c1c144">df3</span> %<span style="color:#47b8d6">></span>%
  ggplot()<span style="color:#47b8d6">+</span>
  geom_hline(<span style="color:#c1c144">yintercept</span> <span style="color:#47b8d6">=</span> <span style="color:#ccc">0</span>, <span style="color:#c1c144">linetype</span>=<span style="color:#ad9361">'dashed'</span>, <span style="color:#c1c144">color</span> <span style="color:#47b8d6">=</span> <span style="color:#ad9361">'gray70'</span>, <span style="color:#c1c144">size</span> <span style="color:#47b8d6">=</span> .<span style="color:#ccc">3</span>, <span style="color:#c1c144">alpha</span> <span style="color:#47b8d6">=</span> .<span style="color:#ccc">7</span>) <span style="color:#47b8d6">+</span>
  geom_line(aes(<span style="color:#c1c144">x</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">Temp</span>, <span style="color:#c1c144">y</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">l2500</span>), <span style="color:#c1c144">color</span> <span style="color:#47b8d6">=</span> <span style="color:#ad9361">'dodgerblue2'</span>, <span style="color:#c1c144">size</span> <span style="color:#47b8d6">=</span> <span style="color:#ccc">1</span>)<span style="color:#47b8d6">+</span>
  geom_line(aes(<span style="color:#c1c144">x</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">Temp</span>, <span style="color:#c1c144">y</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">l5000</span>), <span style="color:#c1c144">color</span> <span style="color:#47b8d6">=</span> <span style="color:#ad9361">'orange2'</span>, <span style="color:#c1c144">size</span> <span style="color:#47b8d6">=</span> <span style="color:#ccc">1</span>) <span style="color:#47b8d6">+</span>
  geom_ribbon(<span style="color:#c1c144">data</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">high_ribbon</span>, aes(<span style="color:#c1c144">x</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">x</span>, <span style="color:#c1c144">ymin</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">ymin</span>, <span style="color:#c1c144">ymax</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">ymax</span>), <span style="color:#c1c144">fill</span> <span style="color:#47b8d6">=</span> <span style="color:#ad9361">'orange2'</span>, <span style="color:#c1c144">alpha</span> <span style="color:#47b8d6">=</span> .<span style="color:#ccc">4</span>) <span style="color:#47b8d6">+</span>
  geom_ribbon(<span style="color:#c1c144">data</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">low_ribbon</span>, aes(<span style="color:#c1c144">x</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">x</span>, <span style="color:#c1c144">ymin</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">ymin</span>, <span style="color:#c1c144">ymax</span> <span style="color:#47b8d6">=</span> <span style="color:#c1c144">ymax</span>), <span style="color:#c1c144">fill</span> <span style="color:#47b8d6">=</span> <span style="color:#ad9361">'dodgerblue2'</span>, <span style="color:#c1c144">alpha</span> <span style="color:#47b8d6">=</span> .<span style="color:#ccc">4</span>) <span style="color:#47b8d6">+</span>
  facet_wrap(<span style="color:#a1a1ff">~</span><span style="color:#c1c144">Species</span>,<span style="color:#c1c144">ncol</span>=<span style="color:#ccc">6</span>)
</pre>
        </div>
        <div class = 'img_box'>
            <img class = 'img_box_img' src = 'img/dib_jan.png' />
        </div>

      <div class = 'text-input-box'>
        <h2><b>February</b></h2>
        <p>Frebruary's dataset contains the legal status of same sex marriage in each US state over a 21 year period from 1995 to 2015. This timeframe presents a rapidly changing legal landscape
         from a near universal ban of same-sex marriage, all the way to complete legality. I saw this as a perfect opportunity to create an animated chloropleth to display this change intuitively over time.
         Although I've made chloropleths with tools like R and Tableau in the past, I wanted use D3.js this time around to take advantage of the library's great transitions and the aesthetically pleasing nature of svg paths.
        It turns out that making chlorpleths in D3 is pretty easy since it has great built in features for handling geojson and topojson. After locating a US map geojson file, I simply had to bind each year of data to the existing json and
        set up synced transitions for the dynamic aspects of the visualization. I added some percentages and appropriately scaling circles to help convey the aggregate legal status along the way. The code for this viz can be viewed on
      <a href = 'https://github.com/jdubx2/battles/tree/master/feb' target='_blank'>github</a> and the full screen version can be viewed <a href='http://quickviz.live/battles/ssm.html' target='_blank'>here</a>.</p>
      </div>

      <div class='img_box'>
        <!-- <div class = 'wrap'> -->
        <iframe scrolling="no" class = 'frame' frameBorder="0" width = 100% src="http://quickviz.live/battles/ssm.html"></iframe>
        <!-- </div> -->
      </div>
    </div>
    </div>
    <!-- /.container -->

    <!-- Footer -->
    <footer class="py-5 bg-dark">
      <div class="container">
        <p class="m-0 text-center text-white">&copy; 2018 jesseweiss.me</p>
      </div>
      <!-- /.container -->
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script src="vendor/bootstrap/js/newjs.js"></script>
    <script type="text/javascript" language="javascript">
    $('.frame').css('height', 750 +'px');
    </script>

  </body>

</html>
